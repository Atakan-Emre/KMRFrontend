(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[961],{285:(e,a,s)=>{"use strict";s.d(a,{$:()=>c});var t=s(5155),l=s(2115),r=s(9708),i=s(2085),n=s(9434);let d=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",clinical_normal:"bg-clinical-normal text-white hover:bg-clinical-normal/90",clinical_attention:"bg-clinical-attention text-white hover:bg-clinical-attention/90",clinical_critical:"bg-clinical-critical text-white hover:bg-clinical-critical/90",clinical_very_critical:"bg-clinical-very_critical text-white hover:bg-clinical-very_critical/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=l.forwardRef((e,a)=>{let{className:s,variant:l,size:i,asChild:c=!1,...o}=e,m=c?r.DX:"button";return(0,t.jsx)(m,{className:(0,n.cn)(d({variant:l,size:i,className:s})),ref:a,...o})});c.displayName="Button"},1243:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(9946).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2370:(e,a,s)=>{"use strict";s.d(a,{Gf:()=>h,k5:()=>o,e6:()=>m,Ev:()=>c});var t=s(2960);async function l(e){let a=await fetch(e,{cache:"no-store"});if(!a.ok)throw Error("Veri y\xfcklenemedi: ".concat(e," (status ").concat(a.status,")"));return a.json()}async function r(){return l("/data/reference_band.json")}async function i(){return l("/data/data_summary.json")}async function n(){return{patients:((await l("/data/patient_features.json")).patients||[]).map(e=>{var a,s,t;return{patient_code:e.patient_code,n_measurements:e.n_measurements,latest_chr:e.latest_chr,latest_date_code:e.latest_date_code,summary:{total_anomalies:null!=(t=null==(a=e.summary)?void 0:a.total_anomalies)?t:0,trend_direction:null==(s=e.summary)?void 0:s.trend_direction,...e.summary},...e}})}}let d={Normal:"#22c55e",Dikkat:"#f59e0b",Kritik:"#f97316","\xc7ok Kritik":"#ef4444"};function c(e){return(0,t.I)({queryKey:["patient-detail",e],queryFn:async()=>{if(!e)return null;let a=await fetch("/data/patients/".concat(e,".json"));if(!a.ok)throw Error("Hasta verisi y\xfcklenemedi: ".concat(e));return a.json()},enabled:!!e,staleTime:12e4})}function o(){return(0,t.I)({queryKey:["channelOverview"],queryFn:async()=>{let e=await fetch("/data/channel_overview.json");if(!e.ok)throw Error("Kanal genel bakış y\xfcklenemedi");return e.json()},staleTime:3e5})}function m(){var e,a,s,l;let c=(0,t.I)({queryKey:["patients"],queryFn:n,staleTime:12e4,gcTime:6e5}),o=(0,t.I)({queryKey:["summary"],queryFn:i,staleTime:3e5}),m=(0,t.I)({queryKey:["reference-band"],queryFn:r,staleTime:3e5,gcTime:18e5}),h=(null==(e=c.data)?void 0:e.patients.map(e=>{let a=function(e){var a,s;let t,l=Number.isFinite(e.latest_chr)?e.latest_chr:0;return{level:t=l<.5?"Normal":l<2?"Dikkat":l<5?"Kritik":"\xc7ok Kritik",score:Math.max(0,Math.min(100,Math.round(Math.min(70,l/5*70)+Math.min(40,6*(null!=(s=null==(a=e.summary)?void 0:a.total_anomalies)?s:0))))),color:d[t]}}(e);return{...e,risk_level:a.level,risk_score:a.score,risk_color:a.color,last_update:new Date().toISOString().split("T")[0]}}))||[],x={totalPatients:(null==(a=o.data)?void 0:a.all_patients.n_patients)||0,activeAlerts:h.filter(e=>["Kritik","\xc7ok Kritik"].includes(e.risk_level)).length,averageRisk:h.length>0?Math.round(h.reduce((e,a)=>e+a.risk_score,0)/h.length):0,lastAnalysis:new Date().toISOString(),patientsWithAnomalies:(null==(s=o.data)?void 0:s.all_patients.patients_with_anomalies)||0};return{patients:h,kpis:x,summary:o.data,referenceBand:(null==(l=m.data)?void 0:l.phase_bands)||[],isLoading:c.isLoading||o.isLoading,error:c.error||o.error}}let h={Normal:"#22c55e",Dikkat:"#f59e0b",Kritik:"#f97316","\xc7ok Kritik":"#ef4444"}},5196:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(9946).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6499:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>K});var t=s(5155),l=s(2115),r=s(8999),i=s(2370),n=s(285),d=s(6695),c=s(7313),o=s(5196),m=s(9434);let h=l.forwardRef((e,a)=>{let{checked:s,onCheckedChange:l,id:r,className:i,disabled:n,...d}=e;return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{ref:a,type:"checkbox",id:r,checked:s,onChange:e=>null==l?void 0:l(e.target.checked),disabled:n,className:"sr-only",...d}),(0,t.jsx)("div",{className:(0,m.cn)("h-4 w-4 rounded-sm border border-primary ring-offset-background","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",s&&"bg-primary text-primary-foreground","cursor-pointer",i),onClick:()=>!n&&(null==l?void 0:l(!s)),children:s&&(0,t.jsx)(o.A,{className:"h-4 w-4 text-white"})})]})});h.displayName="Checkbox";var x=s(5028),u=s(9946);let f=(0,u.A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),p=(0,u.A)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),g=(0,u.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),v=(0,u.A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),j=(0,u.A)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]),y=(0,u.A)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),b=(0,u.A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),k=(0,u.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),N=(0,u.A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),w=(0,u.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),_=(0,u.A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var D=s(1243),z=s(6874),C=s.n(z);let A=(0,x.default)(()=>Promise.all([s.e(840),s.e(722)]).then(s.bind(s,1514)),{loadableGenerated:{webpack:()=>[1514]},ssr:!1}),M=e=>{let a=["#e11d48","#0ea5e9","#10b981","#f59e0b","#8b5cf6","#06b6d4","#84cc16","#f97316","#ec4899","#6366f1","#14b8a6","#eab308","#ef4444","#3b82f6","#22c55e","#a855f7","#f43f5e","#0891b2","#65a30d","#dc2626"],s=0;for(let a=0;a<e.length;a++)s=(s<<5)-s+e.charCodeAt(a),s&=s;return a[Math.abs(s)%a.length]};function K(){let e=(0,r.useParams)().id,{data:a,isLoading:s,error:o}=(0,i.Ev)(e),{isLoading:m,error:x}=(0,i.k5)(),[u,z]=(0,l.useState)(new Set),[K,E]=(0,l.useState)(600),[F,S]=(0,l.useState)(!1),[O,H]=(0,l.useState)(384),[T,B]=(0,l.useState)(!1),[$,R]=(0,l.useState)(!1),[G,L]=(0,l.useState)(!1),[I,q]=(0,l.useState)(!1),[Z,W]=(0,l.useState)(!1),[Y,V]=(0,l.useState)(!1),[P,U]=(0,l.useState)(!1),[X,J]=(0,l.useState)(!1),[Q,ee]=(0,l.useState)(null),ea=(0,l.useMemo)(()=>{if(!(null==a?void 0:a.timeline))return{};let e={};return a.timeline.forEach((a,s)=>{e[a.channel]||(e[a.channel]=[]),e[a.channel].push({...a,originalIndex:s,timeIndex:a.phase_index})}),Object.keys(e).forEach(a=>{e[a].sort((e,a)=>e.phase_code!==a.phase_code?e.phase_code-a.phase_code:e.phase_index-a.phase_index)}),e},[null==a?void 0:a.timeline]),es=(0,l.useMemo)(()=>{if(!a)return[.001,10];let e=[],s=Array.from(u);if(0===s.length||(s.forEach(a=>{(ea[a]||[]).forEach(a=>e.push(a.value))}),G&&(a.personal.post48_median&&e.push(a.personal.post48_median),a.personal.warn_threshold&&e.push(a.personal.warn_threshold),a.personal.crit_threshold&&e.push(a.personal.crit_threshold)),0===e.length))return[.001,10];let t=Math.min(...e),l=Math.max(...e),r=Math.max(.001,(l-t)*.15),i=Math.max(1e-4,t-r);return i<.001&&(i=.001),l<.01&&(i=5e-4),[i,l+r]},[a,u,ea,G]),et=(0,l.useMemo)(()=>{if(!(null==a?void 0:a.data_coverage))return{0:1,1:1,2:1,3:1};let e={0:0,1:0,2:0,3:0};return Object.values(a.data_coverage).forEach(a=>{e[a.phase_code]++}),Object.keys(e).forEach(a=>{let s=parseInt(a);e[s]=Math.max(e[s],1)}),e},[null==a?void 0:a.data_coverage]),el=(0,l.useMemo)(()=>{if(!(null==a?void 0:a.data_coverage))return{0:[],1:[],2:[],3:[]};let e={0:[],1:[],2:[],3:[]};return Object.keys(a.data_coverage).forEach(s=>{e[a.data_coverage[s].phase_code].push(parseFloat(s))}),Object.keys(e).forEach(a=>{e[parseInt(a)].sort((e,a)=>e-a)}),e},[null==a?void 0:a.data_coverage]),er=(0,l.useMemo)(()=>{let e=Object.values(et).reduce((e,a)=>e+a,0),a={},s=0;for(let t=0;t<=3;t++){let l=4*(et[t]/e);a[t]={start:s,end:s+l,width:l,center:s+l/2,sequence:el[t]},s+=l}return a},[et,el]),ei=(0,l.useCallback)(e=>{let a=Math.floor(e),s=er[a];if(!s||!s.sequence)return a;let t=s.sequence.indexOf(e);if(-1===t)return s.start;let l=s.sequence.length;if(1===l)return s.center;{let e;if((l-1)*.05<=s.width){let a=s.width/(l-1);e=s.start+t*a}else e=s.start+.05*t;if(a>0){let s=er[a-1];if(s&&s.sequence&&s.sequence.length>0){let a,t=Math.max(...s.sequence),l=s.sequence.indexOf(t);if(1===s.sequence.length)a=s.center;else if((s.sequence.length-1)*.05<=s.width){let e=s.width/(s.sequence.length-1);a=s.start+l*e}else a=s.start+.05*l;e<=a+.08&&(e=a+.08)}}return e}},[er]),en=(0,l.useMemo)(()=>{if(!(null==a?void 0:a.data_coverage))return{tickvals:[],ticktext:[]};let e={0:"0-48s",1:"G\xfcnl\xfck",2:"Haftalık",3:"Aylık"},s=Object.keys(a.data_coverage).map(parseFloat).sort((e,a)=>e-a),t=[],l=[],r=-1;return s.forEach(s=>{let i=Math.floor(s);if(a.data_coverage[s.toString()]&&el[i]){let a=el[i].indexOf(s)+1,n=ei(s);r>=0&&n<=r+.02&&(n=r+.02),t.push(n),l.push("".concat(e[i],"_").concat(a)),r=n}}),{tickvals:t,ticktext:l}},[null==a?void 0:a.data_coverage,el,ei]),ed=(0,l.useMemo)(()=>{if(!a||0===u.size)return[];let e=[];if(Array.from(u).forEach((a,s)=>{let t=ea[a]||[];if(0===t.length)return;let l=M(a),r=(s-(u.size-1)/2)*.02,i=t.filter(e=>!Object.values(e.flags).some(Boolean));if(i.length>0){let s=i.map((e,a)=>ei(e.date_code)+r+.001*a);for(let e=1;e<s.length;e++)s[e]<=s[e-1]+.03&&(s[e]=s[e-1]+.03);e.push({x:s,y:i.map(e=>e.value),type:"scatter",mode:"markers",name:a,legendgroup:a,showlegend:!0,marker:{color:l,size:12,symbol:"circle",line:{color:"#ffffff",width:2},opacity:1},text:i.map(e=>"".concat(a,"<br>Değer: ").concat(e.value.toFixed(3),"<br>Faz: ").concat(e.phase,"<br>✅ Normal değer")),hovertemplate:"%{text}<extra></extra>",customdata:i.map((e,s)=>({phase:e.phase_code,channel:a,value:e.value,localIdx:s,timeIndex:e.phase_index}))})}else e.push({x:[0],y:[0],type:"scatter",mode:"markers",name:a,legendgroup:a,showlegend:!0,visible:!1,marker:{color:l,size:12,symbol:"circle"}});let n=t.filter(e=>Object.values(e.flags).some(Boolean));if(n.length>0){let s=n.map((e,a)=>ei(e.date_code)+r+.001*a+.005);for(let e=1;e<s.length;e++)s[e]<=s[e-1]+.03&&(s[e]=s[e-1]+.03);e.push({x:s,y:n.map(e=>e.value),type:"scatter",mode:"markers",name:"".concat(a,"_anomalies"),legendgroup:a,showlegend:!1,marker:{color:n.map(e=>e.flags.personal_high_crit?"#ef4444":e.flags.clinical_high?"#dc2626":e.flags.personal_high_warn?"#f97316":e.flags.ref_outlier?"#eab308":l),size:n.map(e=>e.flags.personal_high_crit||e.flags.clinical_high?18:e.flags.personal_high_warn||e.flags.ref_outlier?16:14),symbol:n.map(e=>e.flags.personal_high_crit?"diamond":e.flags.clinical_high?"square":e.flags.personal_high_warn?"triangle-up":e.flags.ref_outlier?"star":"circle"),line:{color:"#ffffff",width:3},opacity:1},text:n.map(e=>{let s="".concat(a,"<br>Değer: ").concat(e.value.toFixed(3),"<br>Faz: ").concat(e.phase);return s+("<br><br>\uD83D\uDEA8 ANOMALİ: "+Object.entries(e.flags).filter(e=>{let[,a]=e;return a}).map(e=>{let[a]=e;switch(a){case"ref_outlier":return"⭐ Referans P97.5 \xfcst\xfc";case"personal_high_crit":return"\uD83D\uDC8E Kişisel +3MAD \xfcst\xfc";case"personal_high_warn":return"\uD83D\uDD3A Kişisel +2MAD \xfcst\xfc";case"clinical_high":return"\uD83D\uDFE6 Klinik eşik \xfcst\xfc";default:return a}}).join(", "))}),hovertemplate:"%{text}<extra></extra>",customdata:n.map((e,s)=>({phase:e.phase_code,channel:a,value:e.value,localIdx:s,timeIndex:e.phase_index}))})}}),(I||Z)&&u.size>0&&a.timeline.length>0){let a={};Array.from(u).forEach(e=>{(ea[e]||[]).forEach(e=>{a[e.phase_code]||(a[e.phase_code]=[]),a[e.phase_code].push(e.value)})});let s=Object.keys(a).map(Number).sort((e,a)=>e-a).map(e=>{var s;return{x:(null==(s=er[e])?void 0:s.center)||e+.5,y:a[e].reduce((e,a)=>e+a,0)/a[e].length}});if(s.length>=2){let a=s.length,t=s.reduce((e,a)=>e+a.x,0)/a,l=s.reduce((e,a)=>e+a.y,0)/a,r=s.reduce((e,a)=>e+(a.x-t)*(a.y-l),0),i=s.reduce((e,a)=>e+Math.pow(a.x-t,2),0);if(0!==i){let a=r/i,s=l-a*t;if(I){let t=Object.values(er).map(e=>e.center),l=t.map(e=>a*e+s);e.push({x:t,y:l,type:"scatter",mode:"lines",name:"\uD83D\uDCC8 Kişisel Trend",showlegend:!0,line:{color:"#6366f1",width:4,dash:"dashdot",opacity:.9},hovertemplate:"Kişisel Trend: %{y:.3f}%<br>Eğim: ".concat(a>0?"+":"").concat(a.toFixed(4),"/faz<extra></extra>")})}if(Z){let a=Object.values(er).map(e=>e.center);e.push({x:a,y:Array(a.length).fill(l),type:"scatter",mode:"lines",name:"\uD83D\uDCCA Kişisel Ortalama",showlegend:!0,line:{color:"#8b5cf6",width:3,dash:"longdash",opacity:.8},hovertemplate:"Kişisel Ortalama: %{y:.3f}%<br>G\xf6r\xfcn\xfcr kanallar ortalaması<extra></extra>"})}}}}if(Y&&u.size>0&&a.timeline.length>0){let s={};a.timeline.forEach(e=>{s[e.phase_code]||(s[e.phase_code]=[]),s[e.phase_code].push(e.value)});let t=Object.keys(s).map(Number).sort((e,a)=>e-a).map(e=>{var a;return{x:(null==(a=er[e])?void 0:a.center)||e+.5,y:s[e].reduce((e,a)=>e+a,0)/s[e].length}});if(t.length>=2){e.push({x:t.map(e=>e.x),y:t.map(e=>e.y),type:"scatter",mode:"lines+markers",name:"\uD83D\uDCCA T\xfcm Kanal Ortalaması",showlegend:!0,line:{color:"#8b5cf6",width:4,dash:"solid"},marker:{size:12,color:"#8b5cf6",symbol:"diamond"},hovertemplate:"T\xfcm Kanal Ortalaması: %{y:.3f}%<br>Faz: %{x}<extra></extra>"});let a=t.length,s=t.reduce((e,a)=>e+a.x,0)/a,l=t.reduce((e,a)=>e+a.y,0)/a,r=t.reduce((e,a)=>e+(a.x-s)*(a.y-l),0),i=t.reduce((e,a)=>e+Math.pow(a.x-s,2),0);if(0!==i){let a=r/i,t=l-a*s;if(a>0){let s=Object.values(er).map(e=>e.center),l=s.map(e=>a*e+t);e.push({x:s,y:l,type:"scatter",mode:"lines",name:"\uD83D\uDCC8 T\xfcm Kanal Trend",showlegend:!0,line:{color:"#8b5cf6",width:5,dash:"longdash",opacity:.8},hovertemplate:"T\xfcm Kanal Trend: %{y:.3f}%<br>Eğim: +".concat(a.toFixed(4),"<extra></extra>")})}}}}if(G&&a.personal.warn_threshold){let s=[],t=Math.max(...Object.values(er).map(e=>e.end));for(let e=0;e<=t;e+=.05)s.push(e);e.push({x:s,y:Array(s.length).fill(a.personal.warn_threshold),type:"scatter",mode:"lines",name:"Kişisel +2MAD",showlegend:!0,line:{color:"#f59e0b",dash:"dash",width:2},hovertemplate:"Kişisel Uyarı: %{y:.3f}%<extra></extra>"}),a.personal.crit_threshold&&e.push({x:s,y:Array(s.length).fill(a.personal.crit_threshold),type:"scatter",mode:"lines",name:"Kişisel +3MAD",showlegend:!0,line:{color:"#ef4444",dash:"dash",width:2},hovertemplate:"Kişisel Kritik: %{y:.3f}%<extra></extra>"})}return e},[u,ea,a,G,I,Z,Y,ei,er]);(0,l.useEffect)(()=>{(null==a?void 0:a.default_on)&&a.default_on.length>0&&z(new Set(a.default_on))},[null==a?void 0:a.default_on]),(0,l.useEffect)(()=>{(null==a?void 0:a.channels)&&0===u.size&&z(new Set([a.channels[0]]))},[null==a?void 0:a.channels,u.size]);let ec=l.useCallback(e=>{if(T)H(Math.min(Math.max(window.innerWidth-e.clientX,320),.7*window.innerWidth))},[T]),eo=l.useCallback(()=>{B(!1)},[]);if((0,l.useEffect)(()=>(T&&(document.addEventListener("mousemove",ec),document.addEventListener("mouseup",eo),document.body.style.cursor="col-resize",document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",ec),document.removeEventListener("mouseup",eo),document.body.style.cursor="",document.body.style.userSelect=""}),[T,ec,eo]),s||m)return(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Hasta verileri y\xfckleniyor..."})]})});if(o||x)return(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-2 text-red-600",children:"Veri Y\xfckleme Hatası"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:(null==o?void 0:o.message)||(null==x?void 0:x.message)||"Bilinmeyen hata"}),(0,t.jsx)(C(),{href:"/patients",children:(0,t.jsxs)(n.$,{variant:"outline",children:[(0,t.jsx)(f,{className:"mr-2 h-4 w-4"}),"Hasta listesine d\xf6n"]})})]});if(!a)return(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"Hasta bulunamadı"}),(0,t.jsxs)("p",{className:"text-muted-foreground mb-4",children:["Hasta kodu: ",e]}),(0,t.jsx)(C(),{href:"/patients",children:(0,t.jsxs)(n.$,{variant:"outline",children:[(0,t.jsx)(f,{className:"mr-2 h-4 w-4"}),"Hasta listesine d\xf6n"]})})]});let em=e=>{let a=new Set(u);a.has(e)?a.delete(e):a.add(e),z(a)},eh=()=>{u.size===a.channels.length?z(new Set):z(new Set(a.channels))},ex=e=>{z(new Set([e]))},eu=()=>{a&&z(new Set(a.channels.filter(e=>{let a=ea[e]||[];return a.reduce((e,a)=>e+a.value,0)/a.length>1}).slice(0,5)))},ef=()=>{a&&z(new Set(a.channels.filter(e=>(ea[e]||[]).some(e=>Object.values(e.flags).some(Boolean)))))},ep=()=>{a&&z(new Set(a.channels.filter(e=>(ea[e]||[]).some(e=>e.flags.trend_up))))},eg=()=>{let e=document.querySelector(".js-plotly-plot");e&&e.downloadImage&&e.downloadImage({format:"png",width:1200,height:K,filename:"".concat(a.meta.patient_code,"_timeline")})},ev=()=>E(e=>Math.min(e+100,1200)),ej=()=>E(e=>Math.max(e-100,400)),ey=()=>E(600),eb=()=>{S(!F),F?E(600):E(window.innerHeight-200)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(C(),{href:"/patients",children:(0,t.jsxs)(n.$,{variant:"outline",size:"sm",children:[(0,t.jsx)(f,{className:"mr-2 h-4 w-4"}),"Geri"]})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold",children:["Hasta ",a.meta.patient_code]}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:[a.meta.n_channels," kanal • ",a.meta.n_measurements," \xf6l\xe7\xfcm"]})]})]})}),(0,t.jsxs)(c.tU,{defaultValue:"timeline",className:"space-y-4",children:[(0,t.jsxs)(c.j7,{children:[(0,t.jsx)(c.Xi,{value:"timeline",children:"\xc7ok Kanallı Zaman Serisi"}),(0,t.jsx)(c.Xi,{value:"anomalies",children:"Anomali Detayları"}),(0,t.jsx)(c.Xi,{value:"stats",children:"Kanal İstatistikleri"}),(0,t.jsx)(c.Xi,{value:"details",children:"Hasta Bilgileri"})]}),(0,t.jsx)(c.av,{value:"timeline",className:"space-y-4",children:(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(d.ZB,{children:"\xc7ok Kanallı Kimerizm Zaman Serisi"}),(0,t.jsxs)(d.BT,{children:[u.size," kanal g\xf6r\xfcnt\xfcleniyor • Kişisel eşikler ve trend \xe7izgileri tercihe bağlı"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1 border rounded-md",children:[(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:ej,title:"Y\xfcksekliği azalt",children:(0,t.jsx)(p,{className:"h-4 w-4"})}),(0,t.jsxs)("span",{className:"px-2 text-xs text-muted-foreground",children:[K,"px"]}),(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:ev,title:"Y\xfcksekliği artır",children:(0,t.jsx)(g,{className:"h-4 w-4"})}),(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:ey,title:"Varsayılan boyut",children:(0,t.jsx)(v,{className:"h-4 w-4"})}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:eb,className:"text-xs font-medium",title:"Detaylı analiz i\xe7in tam ekran modu",children:F?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j,{className:"mr-1 h-4 w-4"}),"Normal G\xf6r\xfcn\xfcm"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y,{className:"mr-1 h-4 w-4"}),"Detaylı Analiz"]})})]}),(0,t.jsxs)(n.$,{variant:"outline",size:"sm",onClick:eg,children:[(0,t.jsx)(b,{className:"mr-2 h-4 w-4"}),"PNG İndir"]})]})]})}),(0,t.jsx)(d.Wu,{className:"overflow-hidden",children:(0,t.jsxs)("div",{className:"".concat(F?"fixed inset-0 z-50 bg-white flex flex-col":"flex flex-col lg:flex-row gap-4 w-full"),style:{height:F?"100vh":"auto",width:F?"100vw":"100%",overflow:F?"hidden":"visible",maxWidth:"100%"},children:[F&&(0,t.jsxs)("div",{className:"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50 flex-shrink-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\uD83E\uDDEC Detaylı Kimerizm Analiz Modu"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Hasta ",a.meta.patient_code," - İnteraktif Grafik + Detaylı Analiz Paneli"]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.$,{variant:$?"default":"outline",size:"sm",onClick:()=>R(!$),className:"text-xs font-medium",title:"Grafik ayarları panelini a\xe7/kapat",children:$?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k,{className:"mr-2 h-4 w-4"}),"Ayarları Kapat"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N,{className:"mr-2 h-4 w-4"}),"Grafik Ayarları"]})}),(0,t.jsxs)(n.$,{variant:"outline",size:"sm",onClick:eb,className:"text-xs font-medium",children:[(0,t.jsx)(j,{className:"mr-2 h-4 w-4"}),"Normal G\xf6r\xfcn\xfcme D\xf6n"]})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 ".concat(F?"flex-1 min-h-0":"flex-col lg:flex-row w-full"),children:[(0,t.jsx)("div",{className:"".concat(F?"flex-1 min-h-0":"w-full lg:flex-1 lg:min-w-0 overflow-hidden"),children:0===u.size?(0,t.jsx)("div",{className:"flex items-center justify-center border-2 border-dashed border-gray-300 rounded-lg",style:{height:F?"calc(100vh - 200px)":"".concat(K,"px")},children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(w,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),(0,t.jsx)("p",{className:"text-lg font-medium",children:"Kanal se\xe7in"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sağ panelden en az bir kanal se\xe7erek başlayın"})]})}):(0,t.jsx)("div",{className:"w-full h-full overflow-hidden",children:(0,t.jsx)(A,{data:ed,layout:{xaxis:{title:{text:"ZAMAN FAZLARI",font:{size:12}},type:"linear",tickmode:"array",tickvals:Object.values(er).map(e=>e.center),ticktext:["0–48 Saat<br>İlk 2 G\xfcn","G\xfcnl\xfck<br>İzlem","Haftalık<br>Kontrol","Aylık<br>Takip"],range:[-.1,Math.max(...Object.values(er).map(e=>e.end))+.1],showgrid:!0,gridcolor:"rgba(128,128,128,0.2)",automargin:!0,fixedrange:!1,side:"bottom",constrain:"domain"},xaxis2:{type:"linear",tickmode:"array",tickvals:en.tickvals,ticktext:en.ticktext,range:[-.1,Math.max(...Object.values(er).map(e=>e.end))+.1],overlaying:"x",side:"top",showgrid:!1,constrain:"domain",tickfont:{size:8,color:"rgba(100,100,100,0.7)"},tickangle:-45,title:{text:"Zaman Sıralaması",font:{size:10,color:"rgba(100,100,100,0.8)"}}},shapes:[...(()=>{let e=["rgba(255,182,193,0.1)","rgba(173,216,230,0.1)","rgba(144,238,144,0.1)","rgba(255,218,185,0.1)"],a=[];for(let s=0;s<=3;s++){let t=er[s];t&&a.push({type:"rect",xref:"x",yref:"paper",x0:t.start,x1:t.end,y0:0,y1:1,fillcolor:e[s],line:{width:0}})}for(let e=1;e<=3;e++){let s=er[e];s&&a.push({type:"line",xref:"x",yref:"paper",x0:s.start,x1:s.start,y0:0,y1:1,line:{color:"rgba(128,128,128,0.3)",width:1,dash:"dash"}})}return a})()],yaxis:{title:{text:"KİMERİZM ORANI",font:{size:12}},type:"linear",autorange:!1,range:es,showgrid:!0,gridcolor:"rgba(128,128,128,0.1)",fixedrange:!1,zeroline:!0,zerolinecolor:"rgba(128,128,128,0.3)",zerolinewidth:1,constrain:"domain"},legend:{orientation:"v",x:1.02,y:.85,font:{size:9},bgcolor:"rgba(255,255,255,0.8)",bordercolor:"rgba(0,0,0,0.1)",borderwidth:1},hovermode:"closest",margin:{t:F?10:20,b:F?40:60,l:F?80:90,r:F?5:10},paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",showlegend:!0,autosize:!0,uirevision:Array.from(u).sort().join("-")},config:{responsive:!0,displayModeBar:!0,modeBarButtonsToRemove:["lasso2d","select2d"],doubleClick:"reset",toImageButtonOptions:{format:"png",filename:"".concat(a.meta.patient_code,"_timeline"),height:F?window.innerHeight-120:K,width:F?window.innerWidth-O-50:void 0,scale:2}},className:"w-full h-full",style:{width:"100%",height:F?"calc(100vh - 200px)":"".concat(K,"px"),minHeight:"400px",maxWidth:"100%"},onInitialized:(e,a)=>{a&&a.on&&a.on("plotly_click",e=>{var a,s,t,l,r,i;let n=null==(s=e.points)||null==(a=s[0])?void 0:a.customdata;n&&"number"==typeof n.phase&&ee({phase:n.phase,channel:null!=(t=n.channel)?t:"",value:null!=(l=n.value)?l:0,localIdx:null!=(r=n.localIdx)?r:0,timeIndex:null!=(i=n.timeIndex)?i:0})})}},"plot-".concat(Array.from(u).sort().join("-")))})}),(0,t.jsx)("div",{className:"".concat(F?"":"w-full lg:w-64 lg:max-w-xs lg:flex-shrink-0 lg:overflow-hidden"),children:(0,t.jsxs)("div",{className:"".concat(F?"bg-gradient-to-b from-slate-50 to-slate-100 border-l shadow-lg relative":"w-full bg-gray-50 border border-gray-200 rounded-lg shadow-sm max-w-full"," transition-all duration-300"),style:{width:F?"".concat(O,"px"):"100%"},children:[F&&(0,t.jsx)("div",{className:"absolute left-0 top-0 w-2 h-full cursor-col-resize hover:bg-blue-200 transition-colors ".concat(T?"bg-blue-300":"bg-transparent hover:bg-blue-100"),onMouseDown:e=>{B(!0),e.preventDefault()},style:{marginLeft:"-4px"},children:(0,t.jsx)("div",{className:"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-1 h-8 bg-gray-400 rounded-full opacity-60"})}),(0,t.jsx)("div",{className:"h-full p-3 overflow-y-auto overflow-x-hidden",style:{scrollbarWidth:"thin",scrollbarColor:"#cbd5e1 #f1f5f9",height:F?"100vh":"".concat(K,"px"),maxWidth:"100%"},children:F?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center border-b pb-3 relative mb-4 sticky top-0 bg-gradient-to-b from-slate-50 to-transparent z-10",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-slate-800 mb-1",children:"\uD83E\uDDEC DETAYLI KİMERİZM ANALİZİ"}),(0,t.jsx)("p",{className:"text-xs text-slate-600",children:"Chromosome Bazlı Risk Değerlendirmesi & Klinik \xd6neriler"}),(0,t.jsx)("div",{className:"text-xs text-blue-600 mt-1 font-medium",children:$?"⚙️ Grafik ayarları a\xe7ık - Ayarları kapatmak i\xe7in \xfcstteki butonu kullanın":"Grafikte bir noktaya tıklayarak başlayın"})]}),$&&(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-3 mb-4 animate-in slide-in-from-top-2 duration-300",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-700 text-sm mb-3",children:"\uD83D\uDCCA Grafik Boyut Kontrolleri"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Grafik Y\xfcksekliği:"}),(0,t.jsxs)("div",{className:"flex items-center space-x-1 border rounded-md",children:[(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:ej,title:"Y\xfcksekliği azalt",children:(0,t.jsx)(p,{className:"h-3 w-3"})}),(0,t.jsxs)("span",{className:"px-2 text-xs text-muted-foreground min-w-[50px] text-center",children:[K,"px"]}),(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:ev,title:"Y\xfcksekliği artır",children:(0,t.jsx)(g,{className:"h-3 w-3"})}),(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:ey,title:"Varsayılan boyut",children:(0,t.jsx)(v,{className:"h-3 w-3"})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,t.jsx)(n.$,{variant:G?"default":"outline",size:"sm",onClick:()=>L(!G),className:"text-xs h-8 justify-start",children:"\uD83D\uDCCF Kişisel \xc7izgiler (Eşikler)"}),(0,t.jsx)(n.$,{variant:I?"default":"outline",size:"sm",onClick:()=>q(!I),className:"text-xs h-8 justify-start",children:"\uD83D\uDCC8 Kişisel Trend"}),(0,t.jsx)(n.$,{variant:Z?"default":"outline",size:"sm",onClick:()=>W(!Z),className:"text-xs h-8 justify-start",children:"\uD83D\uDCCA Kişisel Ortalama"}),(0,t.jsx)(n.$,{variant:Y?"default":"outline",size:"sm",onClick:()=>V(!Y),className:"text-xs h-8 justify-start",children:"\uD83D\uDCC9 Genel Trend \xc7izgisi"})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:eh,className:"flex-1 text-xs h-8",title:u.size===a.channels.length?"T\xfcm kanalları gizle":"T\xfcm kanalları g\xf6ster",children:u.size===a.channels.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_,{className:"mr-1 h-3 w-3"}),"Hepsini Gizle"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w,{className:"mr-1 h-3 w-3"}),"Hepsini G\xf6ster"]})}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>z(new Set(a.default_on)),className:"flex-1 text-xs h-8",title:"Varsayılan kanalları g\xf6ster",children:"\uD83C\uDFAF Varsayılan"})]}),(0,t.jsxs)(n.$,{variant:"outline",size:"sm",onClick:eg,className:"w-full text-xs h-8",children:[(0,t.jsx)(b,{className:"mr-2 h-3 w-3"}),"PNG Olarak İndir"]}),(0,t.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-700 text-sm mb-3",children:"\uD83E\uDDEC KANAL SE\xc7İMLERİ"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:eu,className:"text-xs h-8 justify-start",children:"\uD83D\uDD25 Y\xfcksek Değerler"}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:ef,className:"text-xs h-8 justify-start",children:"⚠️ Anomalili Kanallar"}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:ep,className:"text-xs h-8 justify-start",children:"\uD83D\uDCC8 Y\xfckselen Trend"}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>z(new Set(a.default_on)),className:"text-xs h-8 justify-start",children:"\uD83C\uDFAF Varsayılan"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-blue-600",children:u.size}),(0,t.jsxs)("div",{className:"text-xs text-gray-600",children:["/ ",a.channels.length," kanal aktif"]})]}),(0,t.jsx)("div",{className:"max-h-48 overflow-y-auto",children:(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-1",children:a.channels.map(e=>{let a=u.has(e),s=M(e),l=ea[e]||[],r=l.some(e=>Object.values(e.flags).some(Boolean)),i=l.length>0?l.reduce((e,a)=>e+a.value,0)/l.length:0,n=i<.5?"normal":i<2?"warning":i<5?"critical":"danger";return(0,t.jsxs)("div",{className:"flex flex-col items-center p-1 rounded border transition-all text-center cursor-pointer ".concat(a?"".concat({normal:"border-green-200 bg-green-50",warning:"border-yellow-200 bg-yellow-50",critical:"border-orange-200 bg-orange-50",danger:"border-red-200 bg-red-50"}[n]," border-opacity-100 shadow-sm"):"border-gray-200 bg-gray-50 border-opacity-50"),onClick:()=>em(e),onDoubleClick:()=>ex(e),children:[(0,t.jsx)(h,{checked:a,onCheckedChange:()=>em(e),className:"mb-1 h-3 w-3"}),(0,t.jsx)("div",{className:"w-2 h-2 rounded-full border border-white shadow-sm mb-1",style:{backgroundColor:s}}),(0,t.jsx)("div",{className:"text-xs font-bold truncate w-full",children:e}),(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[r&&(0,t.jsx)("span",{className:"text-orange-600 text-xs",children:"⚠️"}),i>5&&(0,t.jsx)("span",{className:"text-red-600 text-xs",children:"\uD83D\uDEA8"})]}),(0,t.jsxs)("div",{className:"text-xs font-bold ".concat("normal"===n?"text-green-700":"warning"===n?"text-yellow-700":"critical"===n?"text-orange-700":"text-red-700"),children:[i.toFixed(1),"%"]})]},e)})})})]})]})]})]}),Q?(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg border shadow-sm p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("h3",{className:"font-bold text-blue-800",children:["\uD83D\uDCCA ",Q.channel," Analizi"]}),(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>ee(null),className:"text-xs h-6 w-6 p-0",children:"✕"})]}),(0,t.jsxs)("div",{className:"text-center mb-4 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:Q.value.toFixed(3)}),(0,t.jsx)("div",{className:"text-sm text-blue-700",children:"G\xfcncel Kimerizm Oranı"}),(0,t.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:[["İlk 48 Saat","G\xfcnl\xfck İzlem","Haftalık Kontrol","Aylık Takip"][Q.phase],"• ",Q.timeIndex+1,". \xf6l\xe7\xfcm"]})]}),(0,t.jsxs)("div",{className:"p-3 rounded-lg border-2 mb-4 ".concat(Q.value<.5?"bg-green-50 border-green-300":Q.value<2?"bg-yellow-50 border-yellow-300":Q.value<5?"bg-orange-50 border-orange-300":"bg-red-50 border-red-300"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"font-bold text-sm",children:"Risk Seviyesi:"}),(0,t.jsx)("span",{className:"font-bold ".concat(Q.value<.5?"text-green-700":Q.value<2?"text-yellow-700":Q.value<5?"text-orange-700":"text-red-700"),children:Q.value<.5?"✅ Normal":Q.value<2?"\uD83D\uDFE1 Dikkat":Q.value<5?"\uD83D\uDFE0 Kritik":"\uD83D\uDD34 \xc7ok Kritik"})]}),(0,t.jsxs)("div",{className:"text-xs",children:[(0,t.jsx)("strong",{children:"A\xe7ıklama:"})," ",Q.value<.5?"Nakil başarılı seyrediyor. D\xfczenli takip yeterli.":Q.value<2?"Yakın takip gerekli. \xd6l\xe7\xfcm sıklığı artırılabilir.":Q.value<5?"Kritik seviye. İmm\xfcnos\xfcpresif tedavi g\xf6zden ge\xe7irilmeli.":"Acil m\xfcdahale gerekli. Red riski y\xfcksek!"]})]}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:[(0,t.jsx)("h4",{className:"font-bold text-blue-800 text-sm mb-2",children:"\uD83C\uDFE5 Klinik \xd6neriler"}),(0,t.jsx)("div",{className:"text-xs space-y-1",children:Q.value<.5?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:"• Mevcut tedavi protokol\xfcne devam"}),(0,t.jsx)("div",{children:"• 3 aylık takip yeterli"}),(0,t.jsx)("div",{children:"• Hasta bilgilendirmesi: İyi seyir"})]}):Q.value<2?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:"• Aylık kontrol \xf6nerilir"}),(0,t.jsx)("div",{children:"• İmm\xfcnos\xfcpresif doz değerlendirmesi"}),(0,t.jsx)("div",{children:"• Ek chromosome analizi d\xfcş\xfcn\xfclebilir"})]}):Q.value<5?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:"• Acil hematolog kons\xfcltasyonu"}),(0,t.jsx)("div",{children:"• İmm\xfcnos\xfcpresif tedavi artırımı"}),(0,t.jsx)("div",{children:"• Haftalık kimerizm takibi"}),(0,t.jsx)("div",{children:"• Don\xf6r lenfosit inf\xfczyonu değerlendirmesi"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:"• ⚠️ ACİL HEMATOLOJİ KONS\xdcLTASYONU"}),(0,t.jsx)("div",{children:"• Yoğun imm\xfcnos\xfcpresif tedavi"}),(0,t.jsx)("div",{children:"• G\xfcnl\xfck kimerizm monitoring\xfc"}),(0,t.jsx)("div",{children:"• DLI (Don\xf6r Lenfosit İnf\xfczyonu) hazırlığı"}),(0,t.jsx)("div",{children:"• Hastane yatış değerlendirmesi"})]})})]}),(()=>{let e=ea[Q.channel]||[],a=e.findIndex(e=>e.phase_code===Q.phase&&e.phase_index===Q.timeIndex),s=a>0?e[a-1]:null,l=e.length>0?e[0]:null,r=s?Q.value-s.value:null,i=l?Q.value-l.value:null;return(0,t.jsxs)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between cursor-pointer hover:bg-indigo-100 rounded p-1 -m-1 transition-colors",onClick:()=>U(!P),children:[(0,t.jsx)("h4",{className:"font-bold text-indigo-800 text-sm",children:"\uD83D\uDCC8 Trend Analizi"}),(0,t.jsx)("div",{className:"text-indigo-800 transition-transform ".concat(P?"rotate-180":""),children:"▼"})]}),P&&(0,t.jsxs)("div",{className:"space-y-2 text-xs mt-2",children:[s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"\xd6nceki Değer:"}),(0,t.jsx)("span",{className:"font-bold",children:s.value.toFixed(3)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Değişim:"}),(0,t.jsxs)("span",{className:"font-bold ".concat(r>0?"text-red-600":r<0?"text-green-600":"text-gray-600"),children:[r>0?"↗️":r<0?"↘️":"→"," ",r.toFixed(3)]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"İlk Değerden Değişim:"}),(0,t.jsxs)("span",{className:"font-bold ".concat(i>0?"text-red-600":i<0?"text-green-600":"text-gray-600"),children:[i>0?"↗️":i<0?"↘️":"→"," ",i.toFixed(3)]})]}),(0,t.jsxs)("div",{className:"mt-2 pt-2 border-t border-indigo-300",children:[(0,t.jsx)("strong",{children:"Kısa Vadeli Trend:"})," ",.1>Math.abs(r)?"Stabil seyir":r>.5?"⚠️ Hızlı artış - Yakın takip":r>0?"Hafif artış - İzleme devam":r<-.5?"✅ Belirgin iyileşme":"✅ Hafif iyileşme"]}),(0,t.jsxs)("div",{className:"mt-1",children:[(0,t.jsx)("strong",{children:"Genel Seyir:"})," ",.2>Math.abs(i)?"Genel olarak stabil":i>1?"\uD83D\uDEA8 Ciddi k\xf6t\xfcleşme - Acil değerlendirme":i>.5?"⚠️ Belirgin artış - Yakın izlem":i>0?"Hafif artış eğilimi":i<-1?"\uD83C\uDF89 Ciddi iyileşme":i<-.5?"✅ İyi iyileşme":"✅ Hafif iyileşme"]})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-gray-600",children:"İlk \xf6l\xe7\xfcm - \xd6nceki değer karşılaştırması mevcut değil"}),l&&(0,t.jsxs)("div",{className:"text-blue-700",children:[(0,t.jsx)("strong",{children:"Başlangı\xe7 Değeri:"})," ",l.value.toFixed(3),(0,t.jsxs)("span",{className:"text-xs ml-1",children:["(",l.phase,")"]})]})]}),(0,t.jsxs)("div",{className:"mt-3 pt-2 border-t border-indigo-300",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Kanal Ortalaması:"}),(0,t.jsx)("span",{className:"font-bold",children:(e.reduce((e,a)=>e+a.value,0)/e.length).toFixed(3)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Maksimum Değer:"}),(0,t.jsx)("span",{className:"font-bold text-red-600",children:Math.max(...e.map(e=>e.value)).toFixed(3)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Minimum Değer:"}),(0,t.jsx)("span",{className:"font-bold text-green-600",children:Math.min(...e.map(e=>e.value)).toFixed(3)})]})]})]})]})})(),(()=>{let e=Array.from(u).flatMap(e=>ea[e]||[]).find(e=>e.phase_code===Q.phase&&e.channel===Q.channel&&e.value===Q.value&&e.phase_index===Q.timeIndex);if(!(e&&Object.values(e.flags).some(Boolean)))return(0,t.jsxs)("div",{className:"bg-green-50 border border-green-300 rounded-lg p-3 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between cursor-pointer hover:bg-green-100 rounded p-1 -m-1 transition-colors",onClick:()=>J(!X),children:[(0,t.jsx)("h4",{className:"font-bold text-green-800 text-sm",children:"✅ NORMAL DEĞER"}),(0,t.jsx)("div",{className:"text-green-800 transition-transform ".concat(X?"rotate-180":""),children:"▼"})]}),X&&(0,t.jsxs)("div",{className:"text-xs text-green-700 space-y-1 mt-2",children:[(0,t.jsx)("div",{children:"• Bu \xf6l\xe7\xfcmde herhangi bir uyarı bayrağı bulunmuyor"}),(0,t.jsx)("div",{children:"• Referans aralığında ve kişisel eşiklerin altında"}),(0,t.jsx)("div",{children:"• Klinik olarak kabul edilebilir seviyede"})]})]});{let a=Object.entries(e.flags).filter(e=>{let[,a]=e;return a}).map(e=>{let[a]=e;switch(a){case"ref_outlier":return{text:"Referans P97.5 \xdcst\xfc",desc:"Bu değer referans grubunun %97.5'inin \xfcst\xfcnde. Pop\xfclasyon ortalamasından \xe7ok y\xfcksek.",icon:"\uD83D\uDFE1",severity:"warning"};case"personal_high_crit":return{text:"Kişisel Kritik Eşik (+3MAD)",desc:"Hastanın kişisel ortalamasının +3MAD \xfcst\xfcnde. İstatistiksel olarak \xe7ok anormal.",icon:"\uD83D\uDD34",severity:"critical"};case"personal_high_warn":return{text:"Kişisel Uyarı Eşiği (+2MAD)",desc:"Hastanın kişisel ortalamasının +2MAD \xfcst\xfcnde. Normalden belirgin sapma.",icon:"\uD83D\uDFE0",severity:"warning"};case"clinical_high":return{text:"Klinik Y\xfcksek Eşik",desc:"Klinik m\xfcdahale gerektiren seviyeye ulaştı. Acil değerlendirme gerekli.",icon:"\uD83D\uDD34",severity:"critical"};case"trend_up":return{text:"Y\xfckselen Trend Algılandı",desc:"S\xfcrekli artış trendi tespit edildi. İzleme sıklığı artırılmalı.",icon:"\uD83D\uDCC8",severity:"info"};default:return{text:a.replace(/_/g," ").toUpperCase(),desc:"Detaylı a\xe7ıklama mevcut değil.",icon:"⚠️",severity:"info"}}});return(0,t.jsxs)("div",{className:"bg-red-50 border border-red-300 rounded-lg p-3 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between cursor-pointer hover:bg-red-100 rounded p-1 -m-1 transition-colors",onClick:()=>J(!X),children:[(0,t.jsx)("h4",{className:"font-bold text-red-800 text-sm",children:"⚠️ KRİTİKLİK NEDENLERİ"}),(0,t.jsx)("div",{className:"text-red-800 transition-transform ".concat(X?"rotate-180":""),children:"▼"})]}),X&&(0,t.jsxs)("div",{className:"space-y-3 mt-2",children:[a.map((e,a)=>(0,t.jsx)("div",{className:"bg-white rounded-lg p-3 border-l-4 border-red-400",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("span",{className:"text-xl flex-shrink-0",children:e.icon}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-bold text-sm text-red-800 mb-1",children:e.text}),(0,t.jsx)("div",{className:"text-xs text-red-700 leading-relaxed",children:e.desc}),"critical"===e.severity&&(0,t.jsx)("div",{className:"mt-2 text-xs bg-red-100 text-red-800 px-2 py-1 rounded font-medium",children:"\uD83D\uDEA8 Kritik Seviye - Acil M\xfcdahale"})]})]})},a)),(0,t.jsxs)("div",{className:"mt-3 p-2 bg-red-100 border border-red-200 rounded text-xs",children:[(0,t.jsx)("strong",{children:"\uD83D\uDCCB Değerlendirme:"})," Bu uyarılar neden bu \xf6l\xe7\xfcm\xfcn kritik kabul edildiğini a\xe7ıklamaktadır. Her uyarı farklı bir risk fakt\xf6r\xfcn\xfc temsil eder ve klinik karar vermede \xf6nemlidir."]})]})]})}})(),(0,t.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>{(null==Q?void 0:Q.channel)&&z(new Set([Q.channel]))},className:"text-xs flex-1",children:"\uD83C\uDFAF Sadece Bu Kanal"}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>ee(null),className:"text-xs",children:"\uD83D\uDDD1️ Temizle"})]})]})}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500 space-y-4",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDFAF"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-gray-700",children:"Detaylı Analiz Başlatın"}),(0,t.jsx)("div",{className:"text-sm text-gray-600 max-w-sm mx-auto leading-relaxed",children:"Sol taraftaki grafikte herhangi bir chromosome noktasına tıklayarak detaylı kimerizm analizini g\xf6r\xfcnt\xfcleyebilirsiniz"})]}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-md mx-auto",children:[(0,t.jsx)("div",{className:"text-xs text-blue-800 font-medium mb-2",children:"\uD83D\uDCA1 İpu\xe7ları:"}),(0,t.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[(0,t.jsx)("div",{children:"• Grafikteki renkli noktalar uyarı seviyelerini g\xf6sterir"}),(0,t.jsx)("div",{children:"• Bu paneli sol kenarından s\xfcr\xfckleyerek boyutlandırabilirsiniz"}),(0,t.jsx)("div",{children:"• İ\xe7erik fazla olduğunda mouse tekerleği ile scroll yapın"})]})]})]})]}):(0,t.jsxs)("div",{className:"space-y-4 w-full overflow-hidden",children:[(0,t.jsxs)("div",{className:"text-center border-b pb-2",children:[(0,t.jsx)("h3",{className:"text-base font-bold text-gray-800 truncate",children:"\uD83E\uDDEC KANAL SE\xc7İMLERİ"}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Chromosome kanalları"})]}),(0,t.jsx)("div",{className:"space-y-2 w-full",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-1",children:[(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:eh,className:"w-full text-xs h-8 truncate",title:u.size===a.channels.length?"T\xfcm kanalları gizle":"T\xfcm kanalları g\xf6ster",children:u.size===a.channels.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_,{className:"mr-1 h-3 w-3"}),"Hepsini Gizle"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w,{className:"mr-1 h-3 w-3"}),"Hepsini G\xf6ster"]})}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>z(new Set(a.default_on)),className:"w-full text-xs h-8 truncate",title:"Varsayılan kanalları g\xf6ster",children:"\uD83C\uDFAF Varsayılan"})]})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-700 text-xs",children:"\uD83D\uDE80 Hızlı Se\xe7imler"}),(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:eu,className:"text-xs h-7 justify-start",children:"\uD83D\uDD25 Y\xfcksek"}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:ef,className:"text-xs h-7 justify-start",children:"⚠️ Anomali"}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:ep,className:"text-xs h-7 justify-start",children:"\uD83D\uDCC8 Trend"}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>z(new Set(a.default_on)),className:"text-xs h-7 justify-start",children:"\uD83C\uDFAF Varsayılan"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-700 text-sm",children:"\uD83D\uDCCA \xc7izgi ve Eşik Kontrolleri"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.$,{variant:G?"default":"outline",size:"sm",onClick:()=>L(!G),className:"w-full justify-start h-10",children:"\uD83D\uDCCF Kişisel \xc7izgiler (Eşikler)"}),(0,t.jsx)(n.$,{variant:I?"default":"outline",size:"sm",onClick:()=>q(!I),className:"w-full justify-start h-10",children:"\uD83D\uDCC8 Kişisel Trend"}),(0,t.jsx)(n.$,{variant:Z?"default":"outline",size:"sm",onClick:()=>W(!Z),className:"w-full justify-start h-10",children:"\uD83D\uDCCA Kişisel Ortalama"}),(0,t.jsx)(n.$,{variant:Y?"default":"outline",size:"sm",onClick:()=>V(!Y),className:"w-full justify-start h-10",children:"\uD83D\uDCC9 Genel Trend \xc7izgisi"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-700 text-sm",children:"\uD83D\uDCCB Kanal Durumu"}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:eh,className:"text-xs",children:u.size===a.channels.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_,{className:"mr-1 h-3 w-3"}),"Hepsini Gizle"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w,{className:"mr-1 h-3 w-3"}),"Hepsini G\xf6ster"]})})]}),(0,t.jsxs)("div",{className:"bg-gray-100 rounded-lg p-3 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:u.size}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["/ ",a.channels.length," kanal aktif"]})]})]}),(0,t.jsxs)("div",{className:"space-y-2 w-full overflow-hidden",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-700 text-xs truncate",children:"\uD83E\uDDEC Chromosome Kanalları"}),(0,t.jsx)("div",{className:"grid gap-1 grid-cols-2 w-full",children:a.channels.map(e=>{let a=u.has(e),s=M(e),l=ea[e]||[],r=l.some(e=>Object.values(e.flags).some(Boolean)),i=l.length>0?l.reduce((e,a)=>e+a.value,0)/l.length:0,n=i<.5?"normal":i<2?"warning":i<5?"critical":"danger";return(0,t.jsxs)("div",{className:"flex flex-col items-center p-1 rounded border transition-all text-center cursor-pointer min-w-0 w-full ".concat(a?"".concat({normal:"border-green-200 bg-green-50",warning:"border-yellow-200 bg-yellow-50",critical:"border-orange-200 bg-orange-50",danger:"border-red-200 bg-red-50"}[n]," border-opacity-100 shadow-sm"):"border-gray-200 bg-gray-50 border-opacity-50"),onClick:()=>em(e),onDoubleClick:()=>ex(e),children:[(0,t.jsx)(h,{checked:a,onCheckedChange:()=>em(e),id:"channel-".concat(e),className:"h-2 w-2 mb-1"}),(0,t.jsx)("div",{className:"w-2 h-2 rounded-full border border-white shadow-sm mb-1",style:{backgroundColor:s}}),(0,t.jsx)("div",{className:"text-xs font-bold truncate w-full",children:e}),(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[r&&(0,t.jsx)("span",{className:"text-orange-600 text-xs",children:"⚠️"}),i>5&&(0,t.jsx)("span",{className:"text-red-600 text-xs",children:"\uD83D\uDEA8"})]}),(0,t.jsxs)("div",{className:"text-xs font-bold ".concat("normal"===n?"text-green-700":"warning"===n?"text-yellow-700":"critical"===n?"text-orange-700":"text-red-700"),children:[i.toFixed(1),"%"]})]},e)})})]})]})})]})})]})]})})]})}),(0,t.jsx)(c.av,{value:"anomalies",className:"space-y-4",children:(0,t.jsxs)(d.Zp,{children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{children:"Anomali Detayları"}),(0,t.jsx)(d.BT,{children:"Kanal bazında tespit edilen anomaliler"})]}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[a.timeline.filter(e=>Object.values(e.flags).some(Boolean)).map((e,a)=>{let s=M(e.channel);return(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-medium flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s}}),(0,t.jsx)("span",{children:e.channel}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"•"}),(0,t.jsx)("span",{children:e.phase}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"•"}),(0,t.jsxs)("span",{children:[e.value.toFixed(3),"%"]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.flags.ref_outlier&&(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 text-xs bg-red-100 text-red-700 rounded",children:"Referans P97.5 \xfcst\xfc"}),e.flags.personal_high_crit&&(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 text-xs bg-red-100 text-red-700 rounded",children:"Kişisel +3MAD \xfcst\xfc"}),e.flags.personal_high_warn&&!e.flags.personal_high_crit&&(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 text-xs bg-orange-100 text-orange-700 rounded",children:"Kişisel +2MAD \xfcst\xfc"}),e.flags.clinical_high&&(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded",children:"Klinik eşik \xfcst\xfc"})]})]}),(0,t.jsx)(D.A,{className:"h-5 w-5 text-orange-500"})]},a)}),0===a.summary.total_anomalies&&(0,t.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"Hi\xe7bir kanalda anomali tespit edilmedi"})]})})]})}),(0,t.jsx)(c.av,{value:"stats",className:"space-y-4",children:(0,t.jsxs)(d.Zp,{children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{children:"Kanal İstatistikleri"}),(0,t.jsx)(d.BT,{children:"Hasta bazında kanal performansı"})]}),(0,t.jsx)(d.Wu,{children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("th",{className:"text-left py-2",children:"Kanal"}),(0,t.jsx)("th",{className:"text-right py-2",children:"\xd6l\xe7\xfcm"}),(0,t.jsx)("th",{className:"text-right py-2",children:"Min"}),(0,t.jsx)("th",{className:"text-right py-2",children:"Max"}),(0,t.jsx)("th",{className:"text-right py-2",children:"Ortalama"}),(0,t.jsx)("th",{className:"text-right py-2",children:"Anomali"})]})}),(0,t.jsx)("tbody",{children:a.channels.map(e=>{let a=ea[e]||[],s=a.map(e=>e.value),l=a.filter(e=>Object.values(e.flags).some(Boolean)).length,r=M(e);return(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("td",{className:"py-2",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r}}),(0,t.jsx)("span",{children:e})]})}),(0,t.jsx)("td",{className:"text-right py-2",children:s.length}),(0,t.jsx)("td",{className:"text-right py-2",children:s.length>0?Math.min(...s).toFixed(3):"-"}),(0,t.jsx)("td",{className:"text-right py-2",children:s.length>0?Math.max(...s).toFixed(3):"-"}),(0,t.jsx)("td",{className:"text-right py-2",children:s.length>0?(s.reduce((e,a)=>e+a,0)/s.length).toFixed(3):"-"}),(0,t.jsx)("td",{className:"text-right py-2",children:l>0?(0,t.jsx)("span",{className:"text-red-600 font-medium",children:l}):(0,t.jsx)("span",{className:"text-green-600",children:"0"})})]},e)})})]})})})]})}),(0,t.jsx)(c.av,{value:"details",className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsx)(d.ZB,{children:"Hasta \xd6zellikleri"})}),(0,t.jsxs)(d.Wu,{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Hasta Kodu:"}),(0,t.jsx)("span",{className:"font-medium",children:a.meta.patient_code})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Toplam \xd6l\xe7\xfcm:"}),(0,t.jsx)("span",{className:"font-medium",children:a.meta.n_measurements})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Kanal Sayısı:"}),(0,t.jsx)("span",{className:"font-medium",children:a.meta.n_channels})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Toplam Anomali:"}),(0,t.jsx)("span",{className:"font-medium",children:a.summary.total_anomalies})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"HX/GX Grubu:"}),(0,t.jsx)("span",{className:"font-medium",children:a.meta.is_hxgx?"Evet":"Hayır"})]})]})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsx)(d.ZB,{children:"Kişisel Eşikler"})}),(0,t.jsxs)(d.Wu,{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Post-48s Median:"}),(0,t.jsx)("span",{className:"font-medium",children:a.personal.post48_median?a.personal.post48_median.toFixed(3)+"%":"N/A"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Post-48s MAD:"}),(0,t.jsx)("span",{className:"font-medium",children:a.personal.post48_mad?a.personal.post48_mad.toFixed(3):"N/A"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Uyarı Eşiği (+2MAD):"}),(0,t.jsx)("span",{className:"font-medium text-orange-600",children:a.personal.warn_threshold?a.personal.warn_threshold.toFixed(3)+"%":"N/A"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Kritik Eşiği (+3MAD):"}),(0,t.jsx)("span",{className:"font-medium text-red-600",children:a.personal.crit_threshold?a.personal.crit_threshold.toFixed(3)+"%":"N/A"})]})]})]})]})})]})]})}},6695:(e,a,s)=>{"use strict";s.d(a,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>n});var t=s(5155),l=s(2115),r=s(9434);let i=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...l})});i.displayName="Card";let n=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...l})});n.displayName="CardHeader";let d=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("h3",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...l})});d.displayName="CardTitle";let c=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("p",{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",s),...l})});c.displayName="CardDescription";let o=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("p-6 pt-0",s),...l})});o.displayName="CardContent",l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",s),...l})}).displayName="CardFooter"},7313:(e,a,s)=>{"use strict";s.d(a,{Xi:()=>c,av:()=>o,j7:()=>d,tU:()=>n});var t=s(5155),l=s(2115),r=s(2473),i=s(9434);let n=r.bL,d=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.B8,{ref:a,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...l})});d.displayName=r.B8.displayName;let c=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.l9,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...l})});c.displayName=r.l9.displayName;let o=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.UC,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...l})});o.displayName=r.UC.displayName},8640:(e,a,s)=>{Promise.resolve().then(s.bind(s,6499))},9434:(e,a,s)=>{"use strict";s.d(a,{cn:()=>r});var t=s(2596),l=s(9688);function r(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,l.QP)((0,t.$)(a))}},9946:(e,a,s)=>{"use strict";s.d(a,{A:()=>d});var t=s(2115);let l=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,s)=>s?s.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},r=function(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return a.filter((e,a,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===a).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,t.forwardRef)((e,a)=>{let{color:s="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:d,className:c="",children:o,iconNode:m,...h}=e;return(0,t.createElement)("svg",{ref:a,...i,width:l,height:l,stroke:s,strokeWidth:d?24*Number(n)/Number(l):n,className:r("lucide",c),...!o&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[a,s]=e;return(0,t.createElement)(a,s)}),...Array.isArray(o)?o:[o]])}),d=(e,a)=>{let s=(0,t.forwardRef)((s,i)=>{let{className:d,...c}=s;return(0,t.createElement)(n,{ref:i,iconNode:a,className:r("lucide-".concat(l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...c})});return s.displayName=l(e),s}}},e=>{e.O(0,[118,525,942,768,441,964,358],()=>e(e.s=8640)),_N_E=e.O()}]);